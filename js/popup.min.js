var popup=document.querySelector(".modal-add"),catalogItem=document.querySelectorAll(".catalog-item");if(catalogItem)for(var i=0;i<catalogItem.length;i++){var buyCart=catalogItem[i].querySelector(".buy");buyCart.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show")})}if(popup){var popupClose=popup.querySelector(".modal-close");popupClose&&popupClose.addEventListener("click",function(e){e.preventDefault(),popup.classList.contains("modal-show")&&popup.classList.remove("modal-show")})}window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&(popup.classList.remove("modal-show"),popup.classList.remove("modal-error")))});var mapLink=document.querySelector(".img-map"),mapPopup=document.querySelector(".modal-map");if(mapLink&&mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup&&mapPopup.classList.add("modal-show")}),mapPopup){var mapClose=mapPopup.querySelector(".modal-close");mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")})}window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),mapPopup.classList.contains("modal-show")&&(mapPopup.classList.remove("modal-show"),mapPopup.classList.remove("modal-error")))});var isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}var openLetter=document.querySelector(".btn-write"),popupLetter=document.querySelector(".modal-letter"),login=popupLetter.querySelector("[name=name]");if(openLetter&&openLetter.addEventListener("click",function(e){if(e.preventDefault(),popupLetter){var o=popupLetter.querySelector(".modal-close");popupLetter.classList.add("modal-show"),storage?login.value=storage:login.focus()}o&&o.addEventListener("click",function(e){e.preventDefault(),popupLetter.classList.remove("modal-show"),popupLetter.classList.remove("modal-error")})}),popupLetter){var form=popupLetter.querySelector(".letter-form"),text=popupLetter.querySelector("[name=mail]");form&&form.addEventListener("submit",function(e){login.value&&text.value?isStorageSupport&&localStorage.setItem("login",login.value):(e.preventDefault(),popupLetter.classList.remove("modal-error"),popupLetter.offsetWidth=popupLetter.offsetWidth,popupLetter.classList.add("modal-error"))})}window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupLetter.classList.contains("modal-show")&&(popupLetter.classList.remove("modal-show"),popupLetter.classList.remove("modal-error")))});